<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html>  <head>  	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >    <title>Protein-protein interaction network</title>    <script type="text/javascript" src="D3/d3.js"></script>    <script type="text/javascript" src="D3/d3.geom.js"></script>    <script type="text/javascript" src="D3/d3.layout.js"></script>    <script type="text/javascript" src="js/name2prot.js"></script>    <style type="text/css">    	  body {            background-color: #EEFFEE;            margin-left:5%;                   margin-right:10%;             font-family: "Trebuchet MS", Verdana, Helvetica, Arial,sans-serif !important;        }        text {          font: 12px Arial,Georgia,"Courier New","Times New Roman",Messenger,Geneva,sans-serif;          /*pointer-events: none;*/        }        text.shadow {          /*stroke: #fff;          stroke-width: 3px;          stroke-opacity: .8;*/        }        circle.node {          /*stroke: #fff;            stroke-width: 1.5px;*/        }        line.link {          /*stroke: #999;           stroke-opacity: .6;*/        }         table {          margin-right:20px;          margin-bottom:10px;          border:2px solid gray;          caption-side:top;          border-spacing:0px;          width:960px;          border-collapse: collapse;        }        th{          background-color: #e6e6e6;          padding: 5px;          border:2px solid gray;          font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;        }        td{          padding: 5px;          border:2px solid gray;          font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;        }        #table_id {            width: 960px;            border-collapse: collapse;            clear: left;        }        #table_id2 {            width: 960px;            border-collapse: collapse;            clear: left;        }        #chart {            float: left;            width:960px;            height:500px;        }        #chartfather {            float: left;            width:960px;            height:500px;        }        .guide {            color: #000000;            font-size: 16px;            font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;        }        p.guide {            color: #0000aa;            font-size: 16px;            font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;        }        p.guide2 {            width: 960px;            font-size: 18px;            font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;        }        #loadButton, #exampleButton, #resetButton{            font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;            font-size: 16px;            width: 90px;        }        #pro_id {            font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;            font-size: 16px;            font-weight: bold;            color: #0000FF;        }        #inputArea,#sourceProtein,#targetProtein{        	  font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;            font-size: 16px;        }        .pathcell{            color: #0000FF;            text-decoration: underline;            cursor: pointer;        }        #proteinIntroP{        	  clear: left;        }        #proteinIntro{        	  color: #666666;        	  font-size: 15px;            font-family: Arial, "Times New Roman", Georgia, "Courier New", Messenger, Geneva, Arial, sans-serif;        }        #fixButton, #easyEditorId{        	  font-family: Georgia, "Courier New", "Times New Roman", Messenger, Geneva, Arial, sans-serif;            font-size: 16px;            width: 120px;        }        #fixButtonDiv{        	  clear:left;        }        circle.node {           cursor: pointer;        }    </style>  </head>  <body>  	<div class="testDiv">  		 <p class="guide2" id=cispathintro>cisPath result</p>  		 <p id="inputArea">  		 <input type="text" name="pro" id='pro_id' onkeydown="entersearch()">  		 <input type="button" id='loadButton'  value="Find path" onclick="loadJS()">  		 <input type="button" id='exampleButton'  value="Example" onclick="showExample()">  		 <input type="button" id='resetButton'  value="Reset" onclick="resetExample()"><br><br>  		 Please input the gene name or Swiss-Prot accession number for the target protein.<br>  		 </p>  		 <p id="sourceProtein">  		 	    		 </p>  		 <p id="targetProtein">  		 </p>  		 </div>  	<div id="chartfather">    <div id="chart"></div>    </div>    <div class="guide" id="tourguide"><h1><br></h1><h1><br></h1>        Tour guide <br><br>       &bull; Try clicking on a node. <br>       &bull; Try dragging a node with the mouse. <br>       &bull; Gestures can be used for touch screen users. <br>       &bull; Use Ctrl (&#8984;) and '+' or '-' to zoom in and out. <br>       &bull; The shortest path is highlighted by bold lines.       </div>      <div><p id="fixButtonDiv">      	   <input type="button" id='fixButton' onclick="clickFix(this);">      	   <input type="button" value="Edit graph" id='easyEditorId' onclick="openEditor();">&nbsp;&nbsp;&nbsp;           <span id="proteinIntroP"><br></span></p></div>      <div id="table_id"></div>      <div><p class="guide2">      	 All shortest paths:      </p>      <div id="table_id2"></div>	    </div>    <script type="text/javascript">    	  ///////////////////////////////////////////20130202    	  var firstGraph=0;    	  var nodeCharge=-200;    	  var showLink=1;    	  var firstDrag=1;    	  var pathLen=1;    	  var nodeNum=0;    	  var linkProtein="";    	  var linkNum=-1;    	  var loadFlag=0;    	  var loadFlag2=0;    	  function firstDragf(){    	  	  if(showLink==0){    	  	  	 return;    	  	  }    	  	  if(firstDrag!=1){    	  	  	 return;    	  	  }    	  	  firstDrag=0;            document.getElementById("fixButton").value="Release graph";    	  	  fixGraph(0);    	  	 	force.stop();    	  }    	  function timerFun2(){    	  	  showLink=1;    	  	  //alert("timerFun2");    	  }    	  function timerFun(){    	  	  document.getElementById("chart").style.display = "";    	  }    	  ///////////////////////////////////////////20130202    	  Object.clone = function(sObj){             if(typeof sObj !== "object"){                return sObj;             }             var s = {};             if(sObj.constructor == Array){                s = [];             }             for(var i in sObj){                 s[i] = Object.clone(sObj[i]);             }             return s;         }          Object.extend = function(tObj,sObj){             for(var i in sObj){                 if(typeof sObj[i] !== "object"){                   tObj[i] = sObj[i];                }else if (sObj[i].constructor == Array){                   tObj[i] = Object.clone(sObj[i]);                }else{                   tObj[i] = tObj[i] || {};                   Object.extend(tObj[i],sObj[i]);                }               }           }        function trim(str){           return str.replace(/(^\s*)|(\s*$)/g, "");        }        function addNotice(obj, ProteinName){        	  while(obj.lastChild != null){        	  	    obj.removeChild(obj.lastChild);        	  }        	  var string1 = "There is no path to the target protein " + "\""+ProteinName+"\".";        	  var string11 =  "In order to avoid inputting invalid target protein names, the unique identifier Swiss-Prot numbers may alternately be used as input.";        	  var string12 =  "The Swiss-Prot numbers can be sought in ";        	  var string2 = ".";        	  obj.appendChild(document.createTextNode(string1));        	  obj.appendChild(document.createElement('br'));        	  obj.appendChild(document.createTextNode(string11));        	  obj.appendChild(document.createElement('br'));        	  obj.appendChild(document.createTextNode(string12));        	  myLink = document.createElement('a');            myLink.href = "http://www.uniprot.org";            myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);            myLink.appendChild(document.createTextNode("http://www.uniprot.org"));            obj.appendChild(myLink);            obj.appendChild(document.createTextNode(string2));        }        function changeTxt(obj, newtxt){        	  while(obj.lastChild != null){        	  	    obj.removeChild(obj.lastChild);        	  }        	  obj.appendChild(document.createTextNode(newtxt));        }        function changeTxt2(newtxt){        	  var obj = document.getElementById('proteinIntroP');        	  if(obj == null){        	  	 return;        	  }        	  while(obj.lastChild != null){        	  	    obj.removeChild(obj.lastChild);        	  }        	  if(newtxt != ""){        	     var tmp = document.createElement('span');        	     tmp.id = "proteinIntro";        	     tmp.appendChild(document.createTextNode(newtxt));        	     obj.appendChild(tmp);        	  }else{        	  	 obj.appendChild(document.createElement('br'));        	  }        }        function addProteinLink(obj,introduction,proteinName){        	  while(obj.lastChild != null){        	  	    obj.removeChild(obj.lastChild);        	  }        	  obj.appendChild(document.createTextNode(introduction+" ("));        	  myLink = document.createElement('a');            myLink.href = "http://www.uniprot.org/uniprot/"+proteinName;            myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);            myLink.appendChild(document.createTextNode(proteinName));            obj.appendChild(myLink);            obj.appendChild(document.createTextNode(")"));        }    	  function clickfunction(address){    	  	alert(address);    	  	window.open(address,'_blank');    	  	return false;    	  }    	  function getRealName(nameStr){            return nameStr;    	  }    	  function getSwiss(nameStr){    	  	  var swiss_prot = nameStr;            if(name2prot[nameStr]){               swiss_prot = name2prot[nameStr];            }            return swiss_prot;    	  }    	  function  execReg(reg,str){           var result =  reg.exec(str);           return result;        }        function clearResult(){        	 var mydiv = document.getElementById("table_id");        	 mydiv.innerHTML = '';           d3.selectAll("line.link").remove();           d3.selectAll("circle").remove();           d3.selectAll("g").remove();           linkProtein="";           linkNum=-1;        }        function drawGraph(row_id){        	 //alert(row_id);        	 linkNum=row_id;        	 var len=allGraphs.length;        	 var i=0           for(i=0;i<len;i++){           	   var cell1 = document.getElementById("path"+i);           	   var cell2 = document.getElementById(i);               if(i!=row_id){           	      cell1.style["background-color"]="#EEFFEE";           	      cell2.style["background-color"]="#EEFFEE";           	   }else{           	   	  cell1.style["background-color"]="#AAAAEE";           	      cell2.style["background-color"]="#AAAAEE";           	   }           }        	 processJson(allGraphs[parseInt(row_id)]);        }        function showAllPath(){        	 var mydiv = document.getElementById("table_id2");        	 mydiv.innerHTML = '';        	 var mytable = document.createElement("table_id2");        	 mytable.innerHTML = '';           var mytablebody = document.createElement("tbody");           var mycurrent_row = document.createElement("tr");           var mycurrent_cell;           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode("Path"));           mycurrent_row.appendChild(mycurrent_cell);           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode("Graph/Detail"));           mycurrent_row.appendChild(mycurrent_cell);           mytablebody.appendChild(mycurrent_row);           //allPaths[0]="HDAC3:O15379 -> HDAC1:Q13547 -> CTNNB1:P35222 -> PIN1:Q13526 -> RAB4A:P20338"        	 for(x in allPaths){        	 	   //alert(allPaths[x]);        	 	   mycurrent_row = document.createElement("tr");               mycurrent_cell = document.createElement("td");               mycurrent_cell.id = "path"+x;        		   var tmp_m = allPaths[x].split(" -> ");        		   for(y in tmp_m){        		   	   if(y!=0){        		   	   	  mycurrent_cell.appendChild(document.createTextNode(" -> "));        		   	   }        		   	   var names=tmp_m[y].split(":");        		   	   myLink = document.createElement("a");        		   	   myLink.href = "http://www.uniprot.org/uniprot/"+names[1];                   myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);                   myLink.appendChild(document.createTextNode(names[0]));                   //myLink.addEventListener("mouseover", function(e){changeTxt2(this.firstChild.data + ": "+this.href);e.preventDefault();return false;}, false);                   mycurrent_cell.appendChild(myLink);        		   }               mycurrent_row.appendChild(mycurrent_cell);               mycurrent_cell = document.createElement("td");                                             myLink = document.createTextNode("View Graph");        		   myLink.id = "link" + x + "";               mycurrent_cell.appendChild(myLink);               mycurrent_cell.className = "pathcell";               mycurrent_cell.id = x;               mycurrent_cell.name = "cellname"+x;               mycurrent_cell.addEventListener("click", function(e){drawGraph(this.id);}, false);               mycurrent_row.appendChild(mycurrent_cell);               mytablebody.appendChild(mycurrent_row);        	 }        	 mytable.appendChild(mytablebody);           mydiv.appendChild(mytable);        	 //alert(mydiv.innerHTML);        }        function getType(o){            var _t;               return ((_t = typeof(o)) == "object" ? o==null && "null" || Object.prototype.toString.call(o).slice(8,-1):_t).toLowerCase();        }        function extend(destination,source){         for(var p in source){            if(getType(source[p])=="array"||getType(source[p])=="object"){                destination[p]=getType(source[p])=="array"?[]:{};                arguments.callee(destination[p],source[p]);            }            else{                destination[p]=source[p];            }         }        }        function txt2Json(json_old){        	  var txt=json_old;        	  var nodes = [];        	  var links = [];        	  var tmp_m = txt.split("#");        	  var tmp1=tmp_m[0].split("&");        	  var tmp2=tmp_m[1].split("&");        	  pathLen=0;        	  for(var x=0;x<tmp1.length;x++){        	  	  var tmp = tmp1[x].split(";");        	  	  var s = {};        	  	  s["name"] = id2ProteinName[tmp[0]];        	  	  s["group"] = parseInt(tmp[1]);        	  	  nodes[x]=s;        	  	  if(s["group"] < 1000){        	  	  	 pathLen++;        	  	  }        	  }        	  nodeNum=tmp1.length;        	  if(pathLen==1){        	  	 nodeNum=1;        	  }            if(pathLen==1){        	     document.getElementById("tourguide").style.display = "none";            }else{	             document.getElementById("tourguide").style.display = "";            }         	  for(var x=0;x<tmp2.length;x++){        	  	  var tmp = tmp2[x].split(";");        	  	  var s = {};        	  	  s["source"] = parseInt(tmp[0]);        	  	  s["target"] = parseInt(tmp[1]);        	  	  s["value"] = parseInt(tmp[2]);        	  	  if(tmp.length==5){        	  	  	 s["pubmed"] = tmp[3];        	  	     s["Evidence"] = tmp[4];        	  	  }        	  	  links[x]=s;        	  }        	  var json = {};        	  json["nodes"]=nodes;        	  if(firstGraph==1){        	     json["links"]=[];        	  }else{        	  	 json["links"]=links;        	  	 document.getElementById("chart").style.display = "none";        	  	 setTimeout(timerFun, 800);        	  }        	  showLink=0;        	  setTimeout(timerFun2, 2000);        	  firstDrag=1;        	  fixGraph(0.1);        	  return json;        }        function strChange(str){        	  var tmp =str;	          var parter=/String score/g;	          tmp=tmp.replace(parter,"STRING score");	          return tmp;        }        function getCol(group){        	  if(group > 1000){        	  	 return leafNodeCol;        	  }        	  var len=mainNodeCols.length;        	  var idx=(group)%len;        	  idx=pathLen-1-idx;        	  idx=idx%len;        	  return mainNodeCols[idx];        }        var force;        function processJson(json_old){        	 //var json = {};        	 //extend(json,json_old);        	 //clearResult();        	 //var json = {};        	 //Object.extend(json,json_old);        	 changeTxt2("");           if(json_old==null){           	  return;           }        	 var json=txt2Json(json_old);           var mydiv = document.getElementById("table_id");           var html_text = '';           var head1 = 'PubMed IDs';           if((json.links[0] != null)&&(json.links[0]['pubmed'])){              head1 = 'PubMed IDs';           }           var mytable = document.createElement("table");           var mytablebody = document.createElement("tbody");           var mycurrent_row = document.createElement("tr");           var mycurrent_cell;           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode("Protein1"));           //mycurrent_cell.width = 150;           //mycurrent_cell.colSpan = 2;           mycurrent_row.appendChild(mycurrent_cell);           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode("Protein2"));           //mycurrent_cell.width = 100;           mycurrent_row.appendChild(mycurrent_cell);           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode("Evidence"));           mycurrent_row.appendChild(mycurrent_cell);           mycurrent_cell = document.createElement("th");           mycurrent_cell.appendChild(document.createTextNode(head1));           mycurrent_row.appendChild(mycurrent_cell);           mytablebody.appendChild(mycurrent_row);           //alert(json.links);           var last_row=null;           for(x in json.links){           //for(var x=json.links.length-1;x>=0;x--){           //for(var x=0;x<json.links.length;x++){           	  //break;           	  if(typeof(json.links[x]) == "undefined"){            	  	 alert("undined!");           	  	 next;           	  }              if(json.links[x]['value'] > 9){                 var source = json.nodes[json.links[x]['source']]['name'];                 var target = json.nodes[json.links[x]['target']]['name'];                 mycurrent_row = document.createElement("tr");                 mycurrent_cell = document.createElement("td");                 //mycurrent_cell.appendChild(document.createTextNode(getRealName(source)));                 myLink = document.createElement("a");               	 myLink.href = "http://www.uniprot.org/uniprot/"+getSwiss(target);               	 myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);               	 myLink.appendChild(document.createTextNode(getRealName(target)));               	 //myLink.addEventListener("mouseover", function(e){changeTxt2(this.firstChild.data + ": "+this.href);e.preventDefault();return false;}, false);               	 mycurrent_cell.appendChild(myLink);                                  mycurrent_row.appendChild(mycurrent_cell);                 mycurrent_cell = document.createElement("td");                 //mycurrent_cell.appendChild(document.createTextNode(getRealName(target)));                 myLink = document.createElement("a");               	 myLink.href = "http://www.uniprot.org/uniprot/"+getSwiss(source);               	 myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);               	 myLink.appendChild(document.createTextNode(getRealName(source)));               	 //myLink.addEventListener("mouseover", function(e){changeTxt2(this.firstChild.data + ": "+this.href);e.preventDefault();return false;}, false);               	 mycurrent_cell.appendChild(myLink);                                    mycurrent_row.appendChild(mycurrent_cell);                                  mycurrent_cell = document.createElement("td");                 mycurrent_cell.appendChild(document.createTextNode(strChange(json.links[x]['Evidence'])));                 mycurrent_cell.align = 'center';                 mycurrent_row.appendChild(mycurrent_cell);                                  if((json.links[x]['pubmed'])&&(json.links[x]['pubmed'] !="")){                    mycurrent_cell = document.createElement("td");                    //mycurrent_cell.appendChild(document.createTextNode(json.links[x]['pubmed']));                    mycurrent_cell.className = "pubmed";                    mycurrent_cell.align = 'center';                    var tmp_m = json.links[x]['pubmed'].split(", ");                    var first_a = 1;                    for(x in tmp_m) {               	       if(first_a == 0){               	   	      mycurrent_cell.appendChild(document.createTextNode(", "));               	       }               	       myLink = document.createElement("a");               	       myLink.href = '#';               	       if(execReg(/^\d+$/,tmp_m[x])){               	   	      myLink.href = 'http://www.ncbi.nlm.nih.gov/pubmed/'+tmp_m[x];               	       }               	       if(execReg(/^10\./,tmp_m[x])){               	   	      myLink.href = 'http://dx.doi.org/'+tmp_m[x];               	       }               	       //myLink.href = 'http://www.ncbi.nlm.nih.gov/pubmed/'+tmp_m[x];               	       myLink.addEventListener("click", function(e){window.open(this.href,'_blank');e.preventDefault();return false;}, false);               	       myLink.appendChild(document.createTextNode(tmp_m[x]));               	       //myLink.addEventListener("mouseover", function(e){changeTxt2(this.href);e.preventDefault();return false;}, false);               	       mycurrent_cell.appendChild(myLink);               	       first_a = 0;                   }                   mycurrent_row.appendChild(mycurrent_cell);                 }                 else{                   mycurrent_cell = document.createElement("td");                   mycurrent_cell.appendChild(document.createTextNode("Not presented"));                   mycurrent_cell.align = 'center';                   mycurrent_row.appendChild(mycurrent_cell);                 }                  mytablebody.insertBefore(mycurrent_row, last_row);                 last_row=mycurrent_row;              }           }           mytable.appendChild(mytablebody);           mydiv.innerHTML = '';           var mychart = document.getElementById("chart");           //mychart.innerHTML = '';           mydiv.appendChild(mytable);           //return;           d3.selectAll("line.link").remove();           d3.selectAll("circle").remove();           d3.selectAll("g").remove();           var w = 960,           h = 500,           fill = d3.scale.category10();           //json.nodes[0].fixed=1;           force = d3.layout.force()              .nodes(json.nodes)              .links(json.links)              .gravity(.06)              .distance(100)              .charge(nodeCharge)              //.linkDistance(0)              .size([w, h])              .start();            var link = vis.selectAll("line.link")             .data(json.links)            .enter().append("svg:line")              .attr("class", "link")              .style("stroke-width", function(d) {if(1){return Math.sqrt(d.value)}else{return 1}; })              .attr("x1", function(d) { return d.source.x; })              .attr("y1", function(d) { return d.source.y; })              .attr("x2", function(d) { return d.target.x; })              .attr("y2", function(d) { return d.target.y; })              .style("stroke", function(d) { if (d.value>10){ return '#000000'} else {return '#666666'}})              .on("mouseover", function(d){              	  if(d.value > 10){              	  	 d3.select(this).style("stroke-width", Math.sqrt(d.value)+2);              	  }else{              	  	 d3.select(this).style("stroke-width", Math.sqrt(d.value)+2);                  }                })              .on("mouseout", function(d){              	  if(d.value > 10){              	  	 d3.select(this).style("stroke-width", Math.sqrt(d.value));              	  }else{                     d3.select(this).style("stroke-width", Math.sqrt(d.value));                  }               });            var node = vis.selectAll("circle")              .data(json.nodes)            .enter().append("svg:circle")              .attr("class", "node")              .attr("r", function(d) { if(d.group<1000){ return 16;} else {if(nodeNum<=15){return 9}else{return 8};}})            .style("fill", function(d) { return getCol(d.group)})            .style("stroke-width", function(d) { return 2})            .style("stroke", function(d) { return '#000000'})              .on("click", function(d){              	  if(pathLen==1){              	  	 document.getElementById('pro_id').value=d.name;                     loadJS();                     return;              	  }                  window.open("http://www.uniprot.org/uniprot/"+getSwiss(d.name),'_blank');                })              .on("mouseover", function(d){                  window.status="http://www.uniprot.org/uniprot/"+getSwiss(d.name);                  if(pathLen!=1){                     changeTxt2(getRealName(d.name)+ ": http://www.uniprot.org/uniprot/"+getSwiss(d.name));                  }                  d3.select(this).style("stroke-width",4);                  firstDragf();                })              .on("mouseout", function(d){                  window.status="";                  changeTxt2("");                  d3.select(this).style("stroke-width",2);               })              .call(force.drag);            var text = vis.selectAll("g")              .data(json.nodes)            .enter().append("svg:g");             text.append("svg:text")            .attr("dx", 12)            .attr("dy", ".35em")            .attr("class", "shadow")            .text(function(d) { return getRealName(d.name) });            text.append("svg:text")            .attr("dx", 12)            .attr("dy", ".35em")            .text(function(d) { return getRealName(d.name) });          force.on("tick", function() {            link.attr("x1", function(d) { return d.source.x; })                .attr("y1", function(d) { return d.source.y; })                .attr("x2", function(d) { return d.target.x; })                .attr("y2", function(d) { return d.target.y; });            node.attr("transform", function(d) {            return "translate(" + d.x + "," + d.y + ")";          });          text.attr("transform", function(d) {            return "translate(" + d.x + "," + d.y + ")";          });          });          //d3.select("#chart").append("table:tr").text;          addfixButton();        }    </script>    <script type="text/javascript">        var w = 960,            h = 500,            fill = d3.scale.category10();        var vis = d3.select("#chart").append("svg:svg")            .attr("width", w)            .attr("height", h);        var link_address = "http://www.uniprot.org/uniprot/"+sourceProteinId;        addProteinLink(document.getElementById('sourceProtein'),"source: "+sourceProteinName, sourceProteinId);        changeTxt(document.getElementById('cispathintro'), "cisPath results for the source protein "+sourceProteinName);        changeTxt(document.getElementsByTagName('title')[0], sourceProteinName+" ("+sourceProteinId+")");        function loadJS(){        	 //document.getElementById("chart").style.display = "none";        	 firstDrag=1;        	 document.getElementById('pro_id').value=trim(document.getElementById('pro_id').value);        	 var fileNameOld = document.getElementById('pro_id').value;        	 var fileName=fileNameOld.toUpperCase();        	 var targetProteinName=fileName;        	 if(fileName==""){        	 	  alert("Please input a protein name");        	 	  return;        	 }        	 if(1){        	    if(name2prot[fileName]){        	 	     fileName=name2prot[fileName];        	    }else{        	 	     //alert("\""+fileName+"\""+" cannot be converted to Swiss-Prot accession number. Please input Swiss-Prot accession number directly.");        	 	     //clearResult();        	 	     //addNotice(document.getElementById('targetProtein'), fileName);        	 	     //return;        	    }        	 }        	 //alert(fileName);        	 var targetProteinId=fileName;        	 if(sourceProteinId==targetProteinId){        	 	  firstGraph=1;    	        nodeCharge=-30;        	 }else{        	 	  firstGraph=0;    	        nodeCharge=-200;        	 }        	 if(!id2Path[targetProteinId]){        	 	  var link_address = "http://www.uniprot.org/uniprot/"+targetProteinId;        	 	  addNotice(document.getElementById('targetProtein'), fileNameOld.toUpperCase());        	 	  clearResult();        	 	  return;        	 }        	 linkProtein=fileName;        	 var fileName1 = "js/"+fileName+"_graph.js";        	 var link_address = "http://www.uniprot.org/uniprot/"+targetProteinId;        	 addProteinLink(document.getElementById('targetProtein'),"target: "+(fileNameOld.toUpperCase()), targetProteinId);        	 //alert(fileName);           var oHead = document.getElementsByTagName('HEAD').item(0);            var oScript= document.createElement("script");            oScript.type = "text/javascript";            oScript.src=fileName1;            oHead.appendChild(oScript);           loadFlag=0;           oScript.onload = oScript.onreadystatechange = function(){               if(!this.readyState|| this.readyState=='loaded' || this.readyState=='complete'){               	  var json = allGraphs[0];               	  if(loadFlag==0){               	  	 processJson(json);               	  }                  loadFlag=1;               }           };           ///////////////////////////////////////////////           var fileName2 = "js/"+fileName+"_path.js";           var oScript2= document.createElement("script");            oScript2= document.createElement("script");            oScript2.type = "text/javascript";            oScript2.src=fileName2;            oHead.appendChild(oScript2);           loadFlag2=0;           oScript2.onload = oScript2.onreadystatechange = function(){               if(!this.readyState|| this.readyState=='loaded' || this.readyState=='complete'){               	  //alert("load sucessfully");               	  //processJson(allGraphs[row_id]);               	  if(loadFlag2==0){               	  	 showAllPath();               	     drawGraph(0);               	  }               	  loadFlag2=1;               }           };                      //alert(jsonTmp);           //processJson(jsonTmp);    	  };    	  function fixGraph(v){    	  	 fixValue=v;    	  }    	  function clickFix(item){    	  	 if(item.value=="Freeze graph"){    	  	 	  fixGraph(0);    	  	 	  item.value="Release graph";    	  	 	  firstDrag=0;    	  	 	  force.stop();    	  	 }else{    	  	 	  fixGraph(0.1);    	  	 	  item.value="Freeze graph";    	  	 	  force.resume();    	  	 }    	  }    	  function openEditor(){    	  	 var link_address="./easyEditor.html"+"?geneid="+linkProtein+"&number="+linkNum;    	  	 //alert(link_address);    	  	 window.open(link_address,'_blank');    	  }    	  function addfixButton(){        	  var tmp = document.getElementById("fixButton");        	  tmp.type="button";        	  tmp.value="Release graph";        	  //tmp.click();    	  }        function resetExample(){           document.getElementById('pro_id').value=sourceProteinName;           loadJS();           document.getElementById('pro_id').value="";           changeTxt(document.getElementById('targetProtein'), "Please input target protein name.");        };    	  function showExample(){    	  	 if(document.getElementById('pro_id').value!=exampleProteinName){        	   document.getElementById('pro_id').value=exampleProteinName;        	   //document.getElementsByName('subtype')[0].checked=true;        	   //document.getElementsByName('subtype')[1].checked=false;        	 }else{        	 	 document.getElementById('pro_id').value=exampleProteinId;        	 	 //document.getElementsByName('subtype')[0].checked=false;        	   //document.getElementsByName('subtype')[1].checked=true;        	 }           loadJS();    	  };        function processNames(){           if(name2prot==null){              return;           }           var addItems={};           for(var x in name2prot){               if(/[a-z]+/.test(x)) {               	  if(!name2prot[x.toUpperCase()]){                     addItems[x.toUpperCase()]=name2prot[x];                  }               }            }           for(var x in addItems){           	   name2prot[x]=addItems[x];           }            return;    	  }    	  function entersearch(){            var event = window.event || arguments.callee.caller.arguments[0];            if(event.keyCode == 13){               loadJS();            }        }        /////////////// 2012-12-21        document.getElementById('pro_id').value=sourceProteinName;        processNames();        loadJS();        document.getElementById('pro_id').value="";        changeTxt(document.getElementById('targetProtein'), "Please input target protein name.");        //2013-02-01    </script>    <script type="text/javascript">      	if(pathLen==1){        	 document.getElementById("tourguide").style.display = "none";        }else{	         document.getElementById("tourguide").style.display = "";        }     </script>  </body></html>